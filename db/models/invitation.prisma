model Invitation {
  id String @id @default(cuid()) @map("invitation_id")

  // Email of the invited person
  email String

  // Tenant sending the invite
  tenantId String @map("tenant_id")
  tenant   Tenant @relation(fields: [tenantId], references: [id], onDelete: Cascade)

  // (Optional) Specific workspace for invite
  workspaceId String?    @map("workspace_id")
  workspace   Workspace? @relation(fields: [workspaceId], references: [id], onDelete: Cascade)

  // Who sent the invitation
  invitedById String @map("invited_by_id")
  invitedBy   User   @relation("InvitedBy", fields: [invitedById], references: [id])

  // Who accepted (once registered)
  invitedUserId String? @map("invited_user_id")
  invitedUser   User?   @relation("InvitedUser", fields: [invitedUserId], references: [id])

  // Role to assign upon acceptance
  roleId String @map("role_id")
  role   Role   @relation(fields: [roleId], references: [id], onDelete: Restrict)

  // Security token (store hash, not raw)
  tokenHash String @unique @map("token_hash")

  status    InviteStatus @default(PENDING)
  expiresAt DateTime?    @map("expires_at")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([tenantId, email])
  @@index([workspaceId])
  @@index([invitedById])
  @@index([status])
  @@map("invitations")
}

enum InviteStatus {
  PENDING
  ACCEPTED
  EXPIRED
  CANCELLED
  DECLINED
}
